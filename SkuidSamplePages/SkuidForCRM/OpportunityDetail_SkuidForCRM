<!-- This page DOES NOT require the presence the OpportunityJS static resource.-->

<skuidpage unsavedchangeswarning="yes" personalizationmode="server" showsidebar="true" showheader="true" tabtooverride="Opportunities">
   <models>
      <model id="Opportunity" limit="1" query="true" createrowifnonefound="false" sobject="Opportunity" adapter="" type="" doclone="" unloadwarningifunsavedchanges="true">
         <fields>
            <field id="Name"/>
            <field id="StageName"/>
            <field id="CloseDate"/>
            <field id="Amount"/>
            <field id="AccountId"/>
            <field id="Account.Name"/>
            <field id="CreatedById"/>
            <field id="CreatedDate"/>
            <field id="CreatedBy.Name"/>
            <field id="Description"/>
            <field id="HasOpportunityLineItem"/>
            <field id="LeadSource"/>
            <field id="Type"/>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="Pricebook2Id"/>
            <field id="Pricebook2.Name"/>
            <field id="Probability"/>
            <field id="TotalOpportunityQuantity"/>
            <field id="LastModifiedById"/>
            <field id="LastModifiedDate"/>
            <field id="LastModifiedBy.Name"/>
            <field id="CampaignId"/>
            <field id="Campaign.Name"/>
            <field id="IsWon"/>
            <field id="Account.ParentId"/>
            <field id="Account.Parent.Name"/>
            <field id="DefaultProbabilityFormula" uionly="true" displaytype="FORMULA" label="Default Probability" readonly="true" returntype="PERCENT" precision="9" scale="2">
               <formula>MODEL_LOOKUP("OpportunityStages","DefaultProbability","MasterLabel",{{StageName}})</formula>
            </field>
         </fields>
         <conditions>
            <condition type="param" enclosevalueinquotes="true" operator="=" value="id" field="Id"/>
         </conditions>
         <actions>
            <action>
               <actions>
                  <action type="updateRow" fieldmodel="Opportunity" field="Probability" enclosevalueinquotes="false" value="{{{DefaultProbabilityFormula}}}"/>
               </actions>
               <events>
                  <event>row.updated</event>
               </events>
               <fields>
                  <field>StageName</field>
               </fields>
            </action>
         </actions>
      </model>
      <model id="OpportunityRoles" limit="20" query="true" createrowifnonefound="false" sobject="OpportunityContactRole" orderby="" adapter="" type="" doclone="" unloadwarningifunsavedchanges="true">
         <fields>
            <field id="ContactId"/>
            <field id="Contact.Name"/>
            <field id="IsPrimary"/>
            <field id="Role"/>
            <field id="Contact.Phone"/>
            <field id="Contact.Email"/>
            <field id="Contact.AccountId"/>
            <field id="Contact.Account.Name"/>
            <field id="Contact.Title"/>
         </fields>
         <conditions>
            <condition type="param" enclosevalueinquotes="true" operator="=" value="id" field="OpportunityId"/>
         </conditions>
         <actions/>
      </model>
      <model id="LineItems" limit="" query="true" createrowifnonefound="false" sobject="OpportunityLineItem" orderby="SortOrder, PricebookEntry.Product2.Name" adapter="" type="" doclone="" unloadwarningifunsavedchanges="true">
         <fields>
            <field id="SortOrder"/>
            <field id="UnitPrice"/>
            <field id="Quantity"/>
            <field id="Description"/>
            <field id="ListPrice"/>
            <field id="ServiceDate"/>
            <field id="PricebookEntry.Product2Id"/>
            <field id="PricebookEntry.Product2.Name"/>
            <field id="PricebookEntryId"/>
            <field id="PricebookEntry.UnitPrice"/>
            <field id="Discount"/>
            <field id="TotalPriceFormula" uionly="true" displaytype="FORMULA" label="Total Price" readonly="true" returntype="CURRENCY" precision="9" scale="2">
               <formula>{{Quantity}}*{{UnitPrice}}*((100-{{Discount}})/100)</formula>
            </field>
            <field id="UnitPrice2" uionly="true" displaytype="FORMULA" label="Unit Price 2 (workaround)" readonly="true" returntype="CURRENCY" precision="9" scale="2">
               <formula>{{UnitPrice}}*2</formula>
            </field>
            <field id="UnitPriceTemp" uionly="true" displaytype="CURRENCY" label="Unit Price (workaround)" precision="9" scale="2"/>
            <field id="TotalPrice"/>
            <field id="SalesPriceFormula" uionly="true" displaytype="FORMULA" label="Sales Price" precision="9" scale="2" readonly="true" returntype="CURRENCY">
               <formula>{{UnitPrice}}</formula>
            </field>
            <field id="ProductCode"/>
            <field id="Product2.IsActive"/>
            <field id="Product2.ProductCode"/>
            <field id="Product2.Description"/>
            <field id="Product2.Family"/>
            <field id="Product2.Name"/>
         </fields>
         <conditions>
            <condition type="param" enclosevalueinquotes="true" operator="=" value="id" field="OpportunityId"/>
         </conditions>
         <actions>
            <action>
               <actions>
                  <action type="updateRow" fieldmodel="LineItems" field="UnitPrice" enclosevalueinquotes="false" value="{{{SalesPriceFormula}}}"/>
               </actions>
               <events>
                  <event>row.updated</event>
               </events>
               <fields>
                  <field>SalesPriceFormula</field>
               </fields>
            </action>
            <action>
               <actions>
                  <action type="updateRow" fieldmodel="LineItems" field="UnitPriceTemp" enclosevalueinquotes="false" value="{{{UnitPrice}}}"/>
                  <action type="updateRow" fieldmodel="LineItems" field="UnitPrice" enclosevalueinquotes="false" value="{{{UnitPrice2}}}"/>
                  <action type="updateRow" fieldmodel="LineItems" field="UnitPrice" enclosevalueinquotes="false" value="{{{UnitPriceTemp}}}"/>
               </actions>
               <events>
                  <event>row.updated</event>
               </events>
               <fields>
                  <field>Quantity</field>
               </fields>
            </action>
            <action>
               <actions>
                  <action type="save">
                     <models>
                        <model>Opportunity</model>
                     </models>
                  </action>
                  <action type="requeryModel" model="Opportunity" behavior="standard"/>
               </actions>
               <events>
                  <event>models.saved</event>
               </events>
            </action>
            <action>
               <actions>
                  <action type="updateRow" fieldmodel="LineItems" field="UnitPrice" enclosevalueinquotes="false" value="{{{PricebookEntry.UnitPrice}}}"/>
               </actions>
               <events>
                  <event>row.updated</event>
               </events>
               <fields>
                  <field>PricebookEntryId</field>
               </fields>
            </action>
            <action>
               <actions>
                  <action type="updateRow" fieldmodel="LineItems" field="Quantity" enclosevalueinquotes="false" value="1"/>
                  <action type="updateRow" fieldmodel="LineItems" field="ServiceDate" enclosevalueinquotes="false" value="TODAY"/>
               </actions>
               <events>
                  <event>row.created</event>
               </events>
            </action>
         </actions>
      </model>
      <model id="Attachments" limit="20" query="false" createrowifnonefound="false" sobject="Attachment" orderby="LastModifiedDate DESC" adapter="" type="" doclone="">
         <fields>
            <field id="Name"/>
            <field id="LastModifiedById"/>
            <field id="LastModifiedBy.Name" targetobjects="User"/>
            <field id="CreatedById"/>
            <field id="CreatedBy.Name" targetobjects="User"/>
            <field id="LastModifiedDate"/>
            <field id="Description"/>
         </fields>
         <conditions>
            <condition type="modelmerge" operator="=" value="" field="ParentId" novaluebehavior="deactivate" model="Opportunity" enclosevalueinquotes="true" mergefield="Id"/>
         </conditions>
         <actions/>
      </model>
      <model id="Notes" limit="20" query="false" createrowifnonefound="false" sobject="Note" orderby="LastModifiedDate DESC" adapter="" type="" doclone="">
         <fields>
            <field id="Body"/>
            <field id="Title"/>
            <field id="LastModifiedDate"/>
            <field id="LastModifiedById"/>
            <field id="LastModifiedBy.Name"/>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
         </fields>
         <conditions>
            <condition type="param" enclosevalueinquotes="true" operator="=" value="id" field="ParentId"/>
         </conditions>
         <actions/>
      </model>
      <model id="TaskHistory" limit="20" query="false" createrowifnonefound="false" sobject="Task" orderby="ActivityDate DESC" queryallrows="true" adapter="" type="" doclone="">
         <fields>
            <field id="Subject"/>
            <field id="ActivityDate"/>
            <field id="WhoId"/>
            <field id="Who.Name" targetobjects="Contact"/>
            <field id="LastModifiedById"/>
            <field id="LastModifiedBy.Name"/>
            <field id="LastModifiedDate"/>
            <field id="Type"/>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="Description"/>
            <field id="Priority"/>
            <field id="Status"/>
            <field id="Type"/>
            <field id="WhatId"/>
            <field id="What.Name"/>
         </fields>
         <conditions logic="">
            <condition type="param" enclosevalueinquotes="true" operator="=" value="id" field="WhatId"/>
            <condition type="fieldvalue" enclosevalueinquotes="false" operator="=" field="IsClosed" value="true"/>
            <condition type="fieldvalue" value="" enclosevalueinquotes="true" field="Subject" operator="contains" state="filterableoff" inactive="true" name="TaskHistorySubject"/>
         </conditions>
         <actions/>
      </model>
      <model id="OpenTasks" limit="20" query="false" createrowifnonefound="false" sobject="Task" orderby="ActivityDate DESC" adapter="" type="" doclone="">
         <fields>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="WhoId"/>
            <field id="Who.Name" targetobjects="Contact"/>
            <field id="ActivityDate"/>
            <field id="Priority"/>
            <field id="Status"/>
            <field id="Subject"/>
            <field id="Description"/>
            <field id="Type"/>
         </fields>
         <conditions logic="">
            <condition type="param" enclosevalueinquotes="true" operator="=" value="id" field="WhatId"/>
            <condition type="fieldvalue" enclosevalueinquotes="true" operator="!=" field="Status" value="Completed"/>
            <condition type="fieldvalue" enclosevalueinquotes="false" operator="=" field="IsClosed" value="false"/>
            <condition type="fieldvalue" value="" enclosevalueinquotes="true" field="Subject" operator="contains" state="filterableoff" inactive="true" name="OpenTasksSubject"/>
         </conditions>
         <actions/>
      </model>
      <model id="RelevantEvents" limit="" query="false" createrowifnonefound="false" sobject="Event" orderby="ActivityDate DESC" adapter="" type="">
         <fields>
            <field id="EndDateTime"/>
            <field id="StartDateTime"/>
            <field id="Subject"/>
            <field id="WhoId"/>
            <field id="Who.Name" targetobjects="Contact"/>
            <field id="Type"/>
            <field id="IsAllDayEvent"/>
         </fields>
         <conditions>
            <condition type="param" enclosevalueinquotes="true" operator="=" value="id" field="WhatId"/>
         </conditions>
         <actions/>
      </model>
      <model id="OppOwnerCalendarEvents" limit="" query="false" createrowifnonefound="false" sobject="Event">
         <fields>
            <field id="Subject"/>
            <field id="EndDateTime"/>
            <field id="StartDateTime"/>
            <field id="Type"/>
         </fields>
         <conditions>
            <condition type="userinfo" enclosevalueinquotes="true" operator="=" field="OwnerId" value="userid"/>
         </conditions>
         <actions/>
      </model>
      <model id="StageHistory" limit="50" query="false" createrowifnonefound="false" sobject="OpportunityHistory" orderby="CreatedDate DESC" adapter="" type="">
         <fields>
            <field id="Amount"/>
            <field id="StageName"/>
            <field id="Probability"/>
            <field id="ExpectedRevenue"/>
            <field id="CloseDate"/>
            <field id="CreatedDate"/>
            <field id="CreatedById"/>
            <field id="CreatedBy.Name"/>
         </fields>
         <conditions>
            <condition type="param" enclosevalueinquotes="true" operator="=" field="OpportunityId" value="id"/>
         </conditions>
         <actions/>
      </model>
      <model id="OtherOpportunities" limit="5" query="true" createrowifnonefound="false" sobject="Opportunity" orderby="CloseDate DESC" doclone="" type="">
         <fields>
            <field id="Amount"/>
            <field id="CloseDate"/>
            <field id="Probability"/>
            <field id="StageName"/>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="Name"/>
            <field id="CreatedDate"/>
            <field id="CreatedById"/>
            <field id="CreatedBy.Name"/>
            <field id="Id"/>
         </fields>
         <conditions>
            <condition type="modelmerge" enclosevalueinquotes="true" operator="=" value="AccountId" model="Opportunity" field="AccountId" mergefield="AccountId" novaluebehavior="deactivate"/>
            <condition type="modelmerge" enclosevalueinquotes="true" operator="!=" value="Id" model="Opportunity" field="Id" mergefield="Id" novaluebehavior="deactivate"/>
            <condition type="fieldvalue" value="" enclosevalueinquotes="true" field="Type" state="filterableoff" inactive="true" name="Type"/>
            <condition type="fieldvalue" value="Existing Business - Renewal" enclosevalueinquotes="true" field="Type" operator="!=" state="filterableoff" inactive="true" name="TypeNotRenewal"/>
         </conditions>
         <actions/>
      </model>
      <model id="LineItems_OtherOpportunities" limit="" query="false" createrowifnonefound="false" sobject="OpportunityLineItem" orderby="SortOrder, PricebookEntry.Product2.Name" doclone="" type="" adapter="">
         <fields>
            <field id="SortOrder"/>
            <field id="UnitPrice"/>
            <field id="Quantity"/>
            <field id="Description"/>
            <field id="ServiceDate"/>
            <field id="PricebookEntry.Product2Id"/>
            <field id="PricebookEntry.Product2.Name"/>
            <field id="PricebookEntryId"/>
            <field id="PricebookEntry.UnitPrice"/>
            <field id="Discount"/>
            <field id="OpportunityId"/>
            <field id="Opportunity.Name"/>
            <field id="TotalPriceFormula" uionly="true" displaytype="FORMULA" label="Total Price" readonly="true" returntype="CURRENCY">
               <formula>{{Quantity}}*{{UnitPrice}}*((100-{{Discount}})/100)</formula>
            </field>
            <field id="UnitPrice2" uionly="true" displaytype="FORMULA" label="Unit Price 2 (for hacky work only!)" readonly="true" returntype="CURRENCY">
               <formula>{{UnitPrice}}*2</formula>
            </field>
            <field id="UnitPriceTemp" uionly="true" displaytype="CURRENCY" label="Unit Price for hacks" precision="9" scale="2"/>
         </fields>
         <conditions>
            <condition type="fieldvalue" operator="=" value="" field="OpportunityId" novaluebehavior="" enclosevalueinquotes="true" state="filterableoff" inactive="true" name="OpportunityId"/>
         </conditions>
         <actions>
            <action>
               <actions>
                  <action type="updateRow" fieldmodel="LineItems_OtherOpportunities" field="UnitPrice" enclosevalueinquotes="false" value="{{PricebookEntry.UnitPrice}}"/>
               </actions>
               <events>
                  <event>row.updated</event>
               </events>
               <fields>
                  <field>PricebookEntryId</field>
               </fields>
            </action>
            <action>
               <actions>
                  <action type="updateRow" fieldmodel="LineItems_OtherOpportunities" field="UnitPriceTemp" enclosevalueinquotes="false" value="{{{UnitPrice}}}"/>
                  <action type="updateRow" fieldmodel="LineItems_OtherOpportunities" field="UnitPrice" enclosevalueinquotes="false" value="{{{UnitPrice2}}}"/>
                  <action type="updateRow" fieldmodel="LineItems_OtherOpportunities" field="UnitPrice" enclosevalueinquotes="false" value="{{{UnitPriceTemp}}}"/>
               </actions>
               <events>
                  <event>row.updated</event>
               </events>
               <fields>
                  <field>Quantity</field>
               </fields>
            </action>
         </actions>
      </model>
      <model id="NextSteps_OtherOpportunities" limit="" query="false" createrowifnonefound="false" sobject="Task" doclone="" type="">
         <fields>
            <field id="Subject"/>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="ActivityDate"/>
            <field id="WhatId"/>
            <field id="What.Name"/>
         </fields>
         <conditions logic="(1 OR 2) AND 3 AND 4">
            <condition type="fieldvalue" value="" enclosevalueinquotes="true" field="WhatId" state="filterableoff" inactive="true" name="TaskWhatId"/>
            <condition type="fieldvalue" value="" enclosevalueinquotes="true" field="AccountId" state="filterableoff" inactive="true" name="TaskAccountId"/>
            <condition type="fieldvalue" value="Next Step" enclosevalueinquotes="true" field="Type"/>
            <condition type="multiple" value="" field="Status" operator="in" enclosevalueinquotes="true">
               <values>
                  <value>Not Started</value>
                  <value>In Progress</value>
                  <value>Waiting on someone else</value>
               </values>
            </condition>
         </conditions>
         <actions/>
      </model>
      <model id="EmailToSF" limit="1" query="true" createrowifnonefound="false" orderby="LastModifiedDate DESC" sobject="EmailServicesAddress">
         <fields>
            <field id="LocalPart"/>
            <field id="EmailDomainName"/>
         </fields>
         <conditions>
            <condition type="fieldvalue" value="EmailToSalesforce" enclosevalueinquotes="true" field="Function.FunctionName"/>
            <condition type="fieldvalue" value="true" enclosevalueinquotes="false" field="IsActive" operator="="/>
            <condition type="userinfo" value="" field="RunAsUserId" operator="=" enclosevalueinquotes="true" userinfotype="userid"/>
         </conditions>
         <actions/>
      </model>
      <model id="Account" limit="1" query="true" createrowifnonefound="false" sobject="Account" doclone="" type="" adapter="">
         <fields>
            <field id="Name"/>
            <field id="ParentId"/>
            <field id="Parent.Name"/>
            <field id="BillingCity"/>
            <field id="BillingCountry"/>
            <field id="BillingState"/>
            <field id="BillingStreet"/>
            <field id="BillingPostalCode"/>
            <field id="ShippingCity"/>
            <field id="ShippingCountry"/>
            <field id="ShippingState"/>
            <field id="ShippingStreet"/>
            <field id="ShippingPostalCode"/>
            <field id="Description"/>
            <field id="Industry"/>
         </fields>
         <conditions>
            <condition type="modelmerge" value="" field="Id" operator="=" model="Opportunity" enclosevalueinquotes="true" mergefield="AccountId"/>
         </conditions>
         <actions/>
      </model>
      <model id="ContactTaskHistory" limit="" query="false" createrowifnonefound="false" sobject="Task" doclone="" type="" orderby="CreatedDate DESC">
         <fields>
            <field id="Account.Name"/>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="CallType"/>
            <field id="WhoId"/>
            <field id="Who.Name"/>
            <field id="ActivityDate"/>
            <field id="LastModifiedById"/>
            <field id="LastModifiedBy.Name"/>
            <field id="WhatId"/>
            <field id="What.Name"/>
            <field id="Status"/>
            <field id="Subject"/>
            <field id="Description"/>
            <field id="Id"/>
            <field id="AccountId"/>
         </fields>
         <conditions>
            <condition type="fieldvalue" value="" enclosevalueinquotes="true" field="WhoId" state="filterableoff" inactive="true" name="WhoId"/>
         </conditions>
         <actions/>
      </model>
      <model id="NextStepsTasks" limit="20" query="false" createrowifnonefound="false" sobject="Task" adapter="" type="">
         <fields>
            <field id="Subject"/>
            <field id="Status"/>
            <field id="OwnerId"/>
            <field id="Owner.Name"/>
            <field id="ActivityDate"/>
         </fields>
         <conditions>
            <condition type="modelmerge" value="" field="WhatId" operator="=" model="Opportunity" enclosevalueinquotes="true" mergefield="Id" novaluebehavior="deactivate"/>
            <condition type="fieldvalue" value="Completed" enclosevalueinquotes="true" field="Status" operator="!="/>
         </conditions>
         <actions/>
      </model>
      <model id="OpportunityStages" limit="" query="true" createrowifnonefound="false" adapter="" type="" sobject="OpportunityStage">
         <fields>
            <field id="MasterLabel"/>
            <field id="DefaultProbability"/>
         </fields>
         <conditions/>
         <actions/>
      </model>
   </models>
   <components>
      <pagetitle model="Opportunity" uniqueid="sk-2AMWHy-550">
         <maintitle>
            <template>{{Name}}</template>
         </maintitle>
         <subtitle>
            <template>{{Model.Label}}</template>
         </subtitle>
         <actions>
            <action type="delete"/>
            <!--            <action type="share"/>    -->
            <action type="redirect" label="Clone" url="/{{Id}}/e?clone=1&amp;retURL=%2F{{Id}}" icon="sk-icon-clone" window="self"/>
            <!--            <action type="custom" label="Create DS Envelope (Don't Use)" icon="ui-silk-folder-go" snippet="createEnvelope"/>  -->
            <action type="savecancel" label="New Action" window="self">
               <models>
                  <model>OpportunityRoles</model>
                  <model>LineItems</model>
                  <model>Attachments</model>
                  <model>Notes</model>
                  <model>TaskHistory</model>
                  <model>OpenTasks</model>
                  <model>RelevantEvents</model>
                  <model>OtherOpportunities</model>
                  <model>LineItems_OtherOpportunities</model>
                  <model>NextSteps_OtherOpportunities</model>
                  <model>Account</model>
                  <model>ContactTaskHistory</model>
                  <model>NextStepsTasks</model>
               </models>
               <savehotkeys>
                  <hotkey modifiers="meta" key="s"/>
               </savehotkeys>
            </action>
         </actions>
      </pagetitle>
      <tabset rememberlastusertab="true" defertabrendering="true" renderas="" uniqueid="sk-2AMWHy-551">
         <tabs>
            <tab name="Basics" icon="sk-icon-opportunities">
               <components>
                  <basicfieldeditor showsavecancel="false" showheader="true" model="Opportunity" mode="read" uniqueid="sk-2AMWHy-552" buttonposition="" layout="above">
                     <columns>
                        <column width="50%">
                           <sections>
                              <section title="Basic Information" collapsible="no">
                                 <fields>
                                    <field id="Name"/>
                                    <field id="AccountId">
                                       <label>Account</label>
                                       <filters/>
                                    </field>
                                    <field id="Amount" decimalplaces="" valuehalign="" type=""/>
                                    <field id="Type">
                                       <label>Type</label>
                                    </field>
                                    <field id="Description" maxdisplaycharacters="10000"/>
                                 </fields>
                              </section>
                              <section title="Source" collapsible="no">
                                 <fields>
                                    <field id="LeadSource"/>
                                    <field id="CampaignId">
                                       <label>Primary Campaign Source</label>
                                    </field>
                                 </fields>
                              </section>
                           </sections>
                        </column>
                        <column width="50%">
                           <sections>
                              <section title=" Probability" collapsible="no">
                                 <fields>
                                    <field id="IsWon">
                                       <label>Deal is Invoiced / Paid</label>
                                    </field>
                                    <field id="StageName"/>
                                    <field id="Probability"/>
                                    <field id="CloseDate"/>
                                 </fields>
                              </section>
                              <section title="System Information">
                                 <fields>
                                    <field id="OwnerId" type="REFPICK" required="true">
                                       <label>Owner</label>
                                       <filters>
                                          <filter type="fieldvalue" operator="=" enclosevalueinquotes="false" field="IsActive" value="true"/>
                                          <filter type="fieldvalue" operator="=" field="Profile.UserLicense.LicenseDefinitionKey" value="SFDC"/>
                                       </filters>
                                    </field>
                                    <field type="COMBO">
                                       <label>Last Modified By</label>
                                       <template model="Opportunity" multiple="false">{{LastModifiedById}}, {{LastModifiedDate}}</template>
                                    </field>
                                    <field type="COMBO">
                                       <label>Created By</label>
                                       <template model="Opportunity" multiple="false">{{CreatedById}}, {{CreatedDate}}</template>
                                    </field>
                                 </fields>
                              </section>
                           </sections>
                        </column>
                     </columns>
                  </basicfieldeditor>
                  <panelset type="custom" uniqueid="sk-2AMWHy-553">
                     <panels>
                        <panel width="50%">
                           <components>
                              <skootable showconditions="true" showsavecancel="false" searchmethod="server" searchbox="false" showexportbuttons="false" pagesize="10" createrecords="true" model="NextStepsTasks" buttonposition="" mode="read" cssclass="hidetablefooter" uniqueid="sk-2AMWHy-554">
                                 <fields>
                                    <field id="Subject" valuehalign="" type="">
                                       <label>Next Step</label>
                                    </field>
                                    <field id="OwnerId" valuehalign="" type="">
                                       <label>Owner</label>
                                    </field>
                                    <field id="ActivityDate" valuehalign="" type="">
                                       <label>Due</label>
                                    </field>
                                    <field id="Status" valuehalign="" type=""/>
                                 </fields>
                                 <rowactions>
                                    <action type="edit"/>
                                    <action type="delete"/>
                                    <action type="multi" label="Mark Completed" icon="sk-icon-case-close">
                                       <drawer title="Drawer Area" width="800" closehandle="true">
                                          <components/>
                                       </drawer>
                                       <actions>
                                          <action type="updateRow" fieldmodel="NextStepsTasks" field="Status" enclosevalueinquotes="true" value="Completed"/>
                                          <action type="save">
                                             <models>
                                                <model>NextStepsTasks</model>
                                             </models>
                                          </action>
                                       </actions>
                                    </action>
                                 </rowactions>
                                 <massactions usefirstitemasdefault="true"/>
                                 <views>
                                    <view type="standard"/>
                                 </views>
                                 <searchfields/>
                              </skootable>
                           </components>
                        </panel>
                        <panel width="50%">
                           <components/>
                        </panel>
                     </panels>
                  </panelset>
                  <template model="Opportunity" multiple="false" allowhtml="true" uniqueid="sk-2AMWHy-557">
                     <contents>&lt;div class="nx-editor-header-title"&gt;Other Opportunities (Past/Present) with {{Account.Name}}&lt;/div&gt;</contents>
                  </template>
                  <skootable showconditions="true" showsavecancel="false" searchbox="false" searchmethod="server" showexportbuttons="false" pagesize="5" createrecords="true" model="OtherOpportunities" mode="read" emptysearchbehavior="query" uniqueid="sk-fu8jP-522">
                     <fields>
                        <field id="Name"/>
                        <field id="Amount" allowordering="true" readonly="true"/>
                        <field id="StageName" allowordering="true"/>
                        <field id="Probability"/>
                        <field id="CloseDate" allowordering="true"/>
                        <field id="OwnerId" allowordering="true">
                           <label>Owner</label>
                        </field>
                        <field type="COMBO" readonly="true">
                           <label>Created By</label>
                           <template model="OtherOpportunities" multiple="true">{{CreatedById}}, {{CreatedDate}}</template>
                        </field>
                     </fields>
                     <rowactions>
                        <action type="edit"/>
                        <action type="redirect" label="View Opportunity" url="/{{Id}}" icon="sk-icon-arrow-right" window="self"/>
                        <action type="redirect" label="Clone this Opportunity" url="/{{Id}}/e?clone=1&amp;retURL=%2F{{$Param.id}}" icon="sk-icon-clone" window="self"/>
                        <action type="redirect" label="Clone this Opportunity (with Products)" url="/{{Id}}/e?clone=1&amp;retURL=%2F{{$Param.id}}" icon="sk-icon-clone" window="self"/>
                        <action type="drawer" label="Details (Products, Next Steps)" icon="fa-folder" openicon="fa-folder-open">
                           <drawer title="Drawer Area" width="90%" closehandle="true">
                              <components>
                                 <tabset rememberlastusertab="true" defertabrendering="true" renderas="">
                                    <tabs>
                                       <tab name="Products" loadlazypanels="true" icon="sk-icon-product">
                                          <components>
                                             <skootable showconditions="true" showsavecancel="false" searchbox="false" searchmethod="server" showexportbuttons="false" pagesize="10" createrecords="true" model="LineItems_OtherOpportunities" mode="read" buttonposition="" uniqueid="sk-fu8jP-524">
                                                <fields>
                                                   <field id="PricebookEntryId" type="REFPICK" optionsource="model" optionmodel="PricebookEntries" displaytemplate="{{Product2.Name}} (List: {{UnitPrice}})" snippet="" required="true" valuehalign="">
                                                      <label>Product</label>
                                                      <searchfields/>
                                                   </field>
                                                   <field id="ServiceDate" required="true"/>
                                                   <field id="Quantity" type="" snippet="" decimalplaces="" valuehalign=""/>
                                                   <field id="UnitPrice" required="true" decimalplaces="" valuehalign="" type=""/>
                                                   <field id="Description" valuehalign="" type=""/>
                                                   <field id="Discount" type="" decimalplaces="" valuehalign=""/>
                                                   <field id="TotalPriceFormula" decimalplaces="" valuehalign="" type="">
                                                      <summaries>
                                                         <summary>sum</summary>
                                                      </summaries>
                                                   </field>
                                                </fields>
                                                <rowactions>
                                                   <action type="edit"/>
                                                   <action type="delete"/>
                                                   <action type="multi" label="{{$Label.clone}}" icon="sk-icon-clone">
                                                      <actions>
                                                         <action type="createRow" model="LineItems" appendorprepend="append" defaultmodefornewitems="edit">
                                                            <defaults>
                                                               <default type="fieldvalue" field="PricebookEntryId" enclosevalueinquotes="true" value="{{{PricebookEntryId}}}"/>
                                                               <default type="fieldvalue" field="Quantity" enclosevalueinquotes="false" value="{{{Quantity}}}"/>
                                                               <default type="fieldvalue" field="UnitPrice" enclosevalueinquotes="false" value="{{{UnitPrice}}}"/>
                                                               <default type="fieldvalue" field="Discount" enclosevalueinquotes="false" value="{{{Discount}}}"/>
                                                               <default type="fieldvalue" field="Description" enclosevalueinquotes="true" value="{{{Description}}}"/>
                                                               <default type="fieldvalue" field="ServiceDate" enclosevalueinquotes="false" value="{{{ServiceDate}}}"/>
                                                            </defaults>
                                                         </action>
                                                      </actions>
                                                   </action>
                                                </rowactions>
                                                <massactions usefirstitemasdefault="true">
                                                   <action type="massupdate"/>
                                                   <action type="massedit"/>
                                                   <action type="massdelete"/>
                                                </massactions>
                                                <views>
                                                   <view type="standard"/>
                                                </views>
                                                <actions defaultlabel="Global Actions" defaulticon="ui-silk-wand" usefirstitemasdefault="true">
                                                   <action type="redirect" label="Edit All" url="/oppitm/multilineitem.jsp?oppId={{#$Model.Opportunity.data}}{{Id15}}{{/$Model.Opportunity.data}}&amp;retURL=%2F{{$Param.id}}" icon="sk-icon-edit" window="self"/>
                                                   <action type="redirect" label="Sort / Reorder" url="/oppitm/lineitemsort.jsp?id={{#$Model.Opportunity.data}}{{Id15}}{{/$Model.Opportunity.data}}&amp;retURL=%2F{{$Param.id}}" icon="fa-reorder" window="self"/>
                                                </actions>
                                                <searchfields/>
                                                <conditions>
                                                   <condition type="contextrow" field="OpportunityId" mergefield="Id"/>
                                                </conditions>
                                             </skootable>
                                          </components>
                                       </tab>
                                       <tab name="Next Steps" loadlazypanels="true" icon="sk-icon-tasks-open">
                                          <components>
                                             <skootable showconditions="true" showsavecancel="true" searchmethod="server" searchbox="false" showexportbuttons="false" pagesize="10" createrecords="false" model="NextSteps_OtherOpportunities" buttonposition="" mode="read" cssclass="hidetablefooter">
                                                <fields>
                                                   <field id="Subject" valuehalign="" type="" required="true" columnwidth="66.6%"/>
                                                   <field id="ActivityDate" valuehalign="" type="">
                                                      <label>Date Due / Completed</label>
                                                   </field>
                                                   <field id="OwnerId" valuehalign="" type="REFPICK">
                                                      <label>Owner</label>
                                                   </field>
                                                </fields>
                                                <rowactions>
                                                   <action type="edit"/>
                                                   <action type="delete"/>
                                                   <action type="multi" label="Mark Completed" icon="sk-icon-case-close">
                                                      <drawer title="Drawer Area" width="800" closehandle="true">
                                                         <components/>
                                                      </drawer>
                                                      <actions>
                                                         <action type="updateRow" fieldmodel="NextSteps_OtherOpportunities" field="Status" enclosevalueinquotes="true" value="Completed"/>
                                                         <action type="save">
                                                            <models>
                                                               <model>NextSteps</model>
                                                            </models>
                                                         </action>
                                                      </actions>
                                                   </action>
                                                </rowactions>
                                                <massactions usefirstitemasdefault="true">
                                                   <action type="massupdate"/>
                                                   <action type="massdelete"/>
                                                </massactions>
                                                <views>
                                                   <view type="standard"/>
                                                </views>
                                                <searchfields/>
                                                <conditions>
                                                   <condition type="contextrow" field="WhatId" mergefield="Id"/>
                                                </conditions>
                                                <actions defaultlabel="Global Actions" defaulticon="sk-icon-magic" usefirstitemasdefault="true">
                                                   <action type="multi" appendorprepend="prepend" label="New Task" icon="sk-icon-add">
                                                      <drawer title="Drawer Area" width="800" closehandle="true">
                                                         <components/>
                                                      </drawer>
                                                      <actions>
                                                         <action type="createRow" model="NextSteps_OtherOpportunities" appendorprepend="prepend" defaultmodefornewitems="edit">
                                                            <defaults>
                                                               <default type="fieldvalue" field="OwnerId" enclosevalueinquotes="true" value="{{{$Model.RunningUser.data.0.Id}}}"/>
                                                            </defaults>
                                                         </action>
                                                      </actions>
                                                   </action>
                                                </actions>
                                             </skootable>
                                          </components>
                                       </tab>
                                    </tabs>
                                 </tabset>
                              </components>
                              <beforeload>
                                 <action type="blockUI" message="Loading Opportunity details..."/>
                                 <action type="setCondition" model="LineItems_OtherOpportunities" condition="OpportunityId" value="{{{Id}}}"/>
                                 <action type="setCondition" model="NextSteps_OtherOpportunities" condition="TaskWhatId" value="{{{Id}}}"/>
                                 <action type="setCondition" model="NextSteps_OtherOpportunities" condition="TaskAccountId" value="{{{AccountId}}}"/>
                                 <action type="requeryModel" behavior="loadmore" model="LineItems_OtherOpportunities"/>
                                 <action type="requeryModel" model="NextSteps_OtherOpportunities" behavior="standard"/>
                                 <action type="unblockUI"/>
                              </beforeload>
                           </drawer>
                           <renderconditions logictype="and"/>
                        </action>
                     </rowactions>
                     <massactions usefirstitemasdefault="true">
                        <action type="massupdate"/>
                     </massactions>
                     <views>
                        <view type="standard"/>
                     </views>
                     <actions defaultlabel="Global Actions" defaulticon="ui-silk-wand" usefirstitemasdefault="true">
                        <action type="redirect" label="New Opportunity" url="/{{Model.KeyPrefix}}/e" icon="sk-icon-add" window="self"/>
                        <action type="redirect" label="Clone Opportunity &quot;{{#$Model.Opportunity.data}}{{Name}}{{/$Model.Opportunity.data}}&quot;" url="/{{$Param.id}}/e?clone=1&amp;retURL=%2F{{$Param.id}}" icon="sk-icon-clone" window="self"/>
                        <action type="redirect" label="Clone Opportunity &quot;{{#$Model.Opportunity.data}}{{Name}}{{/$Model.Opportunity.data}}&quot; (with Products)" url="/{{$Param.id}}/e?clone=1&amp;cloneli=1&amp;retURL=%2F{{$Param.id}}" icon="sk-icon-clone" window="self"/>
                     </actions>
                     <filters>
                        <filter type="select" filteroffoptionlabel="Any Type" createfilteroffoption="true" affectcookies="true" autocompthreshold="25" condition="Type">
                           <sources>
                              <source type="metadata" effectsbehavior="defaultandothers" prefix="Type: ">
                                 <effects>
                                    <effect action="deactivate" value="" condition="TypeNotRenewal"/>
                                 </effects>
                              </source>
                              <source type="manual" effectsbehavior="justdefault">
                                 <options>
                                    <option label="NON-Renewals" type="complex">
                                       <effects>
                                          <effect action="activate" value="" condition="TypeNotRenewal"/>
                                          <effect action="deactivate" value="" condition="Type"/>
                                       </effects>
                                    </option>
                                 </options>
                              </source>
                           </sources>
                        </filter>
                     </filters>
                     <searchfields/>
                  </skootable>
               </components>
               <oninitialshowactions>
                  <action type="requeryModels" behavior="standard">
                     <models>
                        <model>NextStepsTasks</model>
                     </models>
                  </action>
               </oninitialshowactions>
               <onshowactions/>
            </tab>
            <tab name="Products" icon="sk-icon-product">
               <components>
                  <basicfieldeditor showheader="true" showsavecancel="false" showerrorsinline="true" model="Opportunity" buttonposition="" uniqueid="sk-1RDBPJ-1525" mode="read" layout="above">
                     <columns layoutmode="responsive" columngutter="0px" rowgutter="0px">
                        <column behavior="specified" verticalalign="top" width="500px">
                           <sections>
                              <section title="Opportunity Pricebook" collapsible="no">
                                 <fields>
                                    <field id="Pricebook2Id" valuehalign="" type="REFPICK" required="true" optionsource="" displaytemplate="{{Name}}" searchtemplate="{{Name}}">
                                       <searchfields/>
                                       <filters>
                                          <filter type="fieldvalue" operator="=" enclosevalueinquotes="false" field="IsActive" value="true"/>
                                       </filters>
                                       <renderconditions logictype="and" onhidedatabehavior="keep"/>
                                       <enableconditions/>
                                       <label/>
                                    </field>
                                 </fields>
                              </section>
                           </sections>
                           <renderconditions logictype="and"/>
                        </column>
                     </columns>
                  </basicfieldeditor>
                  <skootable showconditions="true" showsavecancel="false" searchbox="false" searchmethod="server" showexportbuttons="false" pagesize="10" createrecords="true" model="LineItems" mode="read" buttonposition="" uniqueid="sk-fu8jP-523">
                     <fields>
                        <field id="PricebookEntryId" type="" optionsource="" snippet="" required="true" valuehalign="" displaytemplate="{{Product2.Name}}" searchtemplate="{{Product2.Name}} (List: {{UnitPrice}})">
                           <label>Product</label>
                           <searchfields>
                              <searchfield query="true" return="true" show="true" field="Product2.Name" operator="contains"/>
                              <searchfield query="true" return="true" show="true" field="UnitPrice"/>
                              <searchfield query="false" return="true" show="true" field="ProductCode" operator="contains"/>
                              <searchfield query="false" return="true" show="true" field="Product2.Family" operator="contains"/>
                              <searchfield query="false" return="true" show="true" field="Product2.Description" operator="contains"/>
                           </searchfields>
                           <filters>
                              <filter type="fieldvalue" operator="=" enclosevalueinquotes="false" field="IsActive" value="true"/>
                              <filter type="modelmerge" operator="=" field="Pricebook2Id" value="" model="Opportunity" enclosevalueinquotes="true" mergefield="Pricebook2Id" novaluebehavior="deactivate"/>
                           </filters>
                        </field>
                        <field id="ServiceDate" required="true" valuehalign="" type=""/>
                        <field id="Quantity" type="" snippet="" decimalplaces="" valuehalign=""/>
                        <field id="UnitPrice" decimalplaces="" valuehalign="" type="">
                           <summaries/>
                        </field>
                        <field id="Description" valuehalign="" type=""/>
                        <field id="Discount" type="" decimalplaces="" valuehalign=""/>
                        <field id="TotalPriceFormula" decimalplaces="" valuehalign="" type="">
                           <summaries>
                              <summary>sum</summary>
                           </summaries>
                        </field>
                     </fields>
                     <rowactions>
                        <action type="edit"/>
                        <action type="delete"/>
                        <action type="multi" label="{{$Label.clone}}" icon="sk-icon-clone">
                           <actions>
                              <action type="createRow" model="LineItems" appendorprepend="append" defaultmodefornewitems="edit">
                                 <defaults>
                                    <default type="fieldvalue" field="PricebookEntryId" enclosevalueinquotes="true" value="{{{PricebookEntryId}}}"/>
                                    <default type="fieldvalue" field="Quantity" enclosevalueinquotes="false" value="{{{Quantity}}}"/>
                                    <default type="fieldvalue" field="UnitPrice" enclosevalueinquotes="false" value="{{{UnitPrice}}}"/>
                                    <default type="fieldvalue" field="Discount" enclosevalueinquotes="false" value="{{{Discount}}}"/>
                                    <default type="fieldvalue" field="Description" enclosevalueinquotes="true" value="{{{Description}}}"/>
                                    <default type="fieldvalue" field="ServiceDate" enclosevalueinquotes="false" value="{{{ServiceDate}}}"/>
                                 </defaults>
                              </action>
                           </actions>
                        </action>
                     </rowactions>
                     <massactions usefirstitemasdefault="true">
                        <action type="massupdate"/>
                        <action type="massedit"/>
                        <action type="massdelete"/>
                     </massactions>
                     <views>
                        <view type="standard"/>
                     </views>
                     <actions defaultlabel="Global Actions" defaulticon="ui-silk-wand" usefirstitemasdefault="true">
                        <action type="redirect" label="Sort / Reorder" url="/oppitm/lineitemsort.jsp?id={{#$Model.Opportunity.data}}{{Id15}}{{/$Model.Opportunity.data}}&amp;retURL=%2F{{$Param.id}}" icon="sk-icon-listview" window="self"/>
                     </actions>
                     <searchfields/>
                  </skootable>
               </components>
               <oninitialshowactions>
                  <action type="requeryModel" model="LineItems" behavior="standard"/>
               </oninitialshowactions>
               <onshowactions/>
               <renderconditions logictype="and"/>
            </tab>
            <tab name="People" icon="sk-icon-key-people">
               <components>
                  <skootable showconditions="true" showsavecancel="false" searchbox="true" searchmethod="server" showexportbuttons="false" pagesize="10" createrecords="true" model="OpportunityRoles" mode="read" uniqueid="sk-2AMWHy-560">
                     <fields>
                        <field id="ContactId">
                           <label>Person</label>
                        </field>
                        <field id="Contact.AccountId">
                           <label>Account</label>
                        </field>
                        <field type="COMBO" allowhtml="true" valuehalign="">
                           <label>Email</label>
                           <template>{{#Contact.Email}}{{Contact.Email}} [&lt;a href="https://mail.google.com/mail/?view=cm&amp;fs=1&amp;tf=1&amp;to={{{Contact.Email}}}&amp;bcc=emailtosalesforce@{{#$Model.EmailToSF.data}}{{EmailDomainName}}{{/$Model.EmailToSF.data}}&amp;shva=1" target="ComposeGmail"&gt;&lt;img src="/img/google/gmail_M_icon.gif" alt=""/&gt; Gmail&lt;/a&gt;]{{/Contact.Email}}</template>
                        </field>
                        <field id="Contact.Phone" valuehalign="" type="">
                           <label>Phone</label>
                        </field>
                        <field id="Contact.Title" valuehalign="" type=""/>
                        <field id="Role" required="true"/>
                        <field id="IsPrimary"/>
                     </fields>
                     <rowactions>
                        <action type="edit"/>
                        <action type="delete"/>
                        <action type="drawer" label="View Contact's Activity History" icon="sk-icon-popup" openicon="sk-icon-cancel">
                           <drawer title="Drawer Area" width="800">
                              <components>
                                 <skootable showconditions="true" showsavecancel="true" searchmethod="server" searchbox="false" showexportbuttons="false" pagesize="10" createrecords="true" model="ContactTaskHistory" buttonposition="" mode="read">
                                    <fields>
                                       <field id="ActivityDate"/>
                                       <field id="Subject"/>
                                       <field id="Status"/>
                                       <field id="WhoId"/>
                                       <field id="WhatId"/>
                                       <field id="OwnerId"/>
                                    </fields>
                                    <rowactions>
                                       <action type="edit"/>
                                       <action type="delete"/>
                                       <action type="drawer" label="View Activity Details" icon="ui-silk-comments" openicon="sk-icon-cancel">
                                          <drawer title="Drawer Area" width="800">
                                             <components>
                                                <basicfieldeditor showheader="true" showsavecancel="false" model="ContactTaskHistory" buttonposition="" mode="read" layout="above">
                                                   <columns>
                                                      <column width="100%">
                                                         <sections>
                                                            <section title="Activity Details" collapsible="no">
                                                               <fields>
                                                                  <field id="Description" valuehalign="" type="">
                                                                     <label/>
                                                                  </field>
                                                               </fields>
                                                            </section>
                                                         </sections>
                                                      </column>
                                                   </columns>
                                                </basicfieldeditor>
                                             </components>
                                          </drawer>
                                       </action>
                                    </rowactions>
                                    <massactions usefirstitemasdefault="true"/>
                                    <views>
                                       <view type="standard"/>
                                    </views>
                                    <conditions>
                                       <condition type="contextrow" field="WhoId" mergefield="ContactId"/>
                                    </conditions>
                                    <searchfields/>
                                 </skootable>
                              </components>
                              <beforeload>
                                 <action type="setCondition" model="ContactTaskHistory" condition="WhoId" value="{{ContactId}}"/>
                                 <action type="requeryModel" model="ContactTaskHistory" behavior="loadmore"/>
                              </beforeload>
                           </drawer>
                        </action>
                     </rowactions>
                     <massactions usefirstitemasdefault="true">
                        <action type="massupdate"/>
                        <action type="massdelete"/>
                     </massactions>
                     <views>
                        <view type="standard"/>
                     </views>
                     <actions defaultlabel="Global Actions" defaulticon="ui-silk-wand" usefirstitemasdefault="true">
                        <action type="redirect" label="Define Key People" url="/p/opp/ContactRoleEditUi/e?oppid={{$Param.id}}&amp;retURL=%2F{{$Param.id}}" icon="sk-icon-key-people" window="self"/>
                     </actions>
                  </skootable>
               </components>
               <oninitialshowactions>
                  <action type="requeryModel" model="OpportunityRoles" behavior="standard"/>
               </oninitialshowactions>
               <onshowactions/>
               <renderconditions logictype="and"/>
            </tab>
            <tab name="Activities" icon="sk-icon-activities">
               <components>
                  <tabset rememberlastusertab="true" defertabrendering="true" renderas="" uniqueid="sk-2AMWHy-561">
                     <tabs>
                        <tab name="Chatter" loadlazypanels="true" icon="sk-icon-comments">
                           <components>
                              <social model="Opportunity" feedtype="" uniqueid="sk-2AMWHy-562">
                                 <actions>
                                    <action type="requeryModels" model="Opportunity" behavior="loadmore">
                                       <models>
                                          <model>TaskHistory</model>
                                          <model>OpenTasks</model>
                                       </models>
                                    </action>
                                 </actions>
                              </social>
                           </components>
                        </tab>
                        <tab name="Tasks" icon="fa-check-square-o">
                           <components>
                              <template model="Opportunity" multiple="true" allowhtml="true" uniqueid="sk-2AMWHy-563">
                                 <contents>&lt;div class="nx-editor-header-title"&gt;Open Tasks&lt;/div&gt;</contents>
                              </template>
                              <skootable showconditions="true" showsavecancel="false" searchbox="false" searchmethod="server" showexportbuttons="false" pagesize="5" createrecords="true" model="OpenTasks" mode="read" emptysearchbehavior="query" uniqueid="sk-2AMWHy-564">
                                 <fields>
                                    <field id="Subject"/>
                                    <field id="WhoId">
                                       <label>Related To</label>
                                    </field>
                                    <field id="Priority" allowordering="true"/>
                                    <field id="Status" allowordering="true"/>
                                    <field id="ActivityDate" allowordering="true">
                                       <label>Due Date</label>
                                    </field>
                                    <field id="OwnerId" valuehalign="" type="">
                                       <label>Assigned To</label>
                                    </field>
                                    <field id="Description"/>
                                 </fields>
                                 <rowactions>
                                    <action type="edit"/>
                                    <action type="delete"/>
                                    <action type="multi" label="Mark Completed" icon="fa-check-square-o">
                                       <actions>
                                          <action type="updateRow" fieldmodel="OpenTasks" field="Status" enclosevalueinquotes="true" value="Completed"/>
                                          <action type="save">
                                             <models>
                                                <model>OpenTasks</model>
                                             </models>
                                          </action>
                                          <action type="requeryModels" model="TaskHistory" behavior="standard">
                                             <models>
                                                <model>TaskHistory</model>
                                                <model>OpenTasks</model>
                                             </models>
                                          </action>
                                       </actions>
                                    </action>
                                    <action type="drawer" icon="fa-folder" label="View Conversation Details" openicon="fa-folder-o">
                                       <drawer title="Drawer Area" width="800" closehandle="true">
                                          <components>
                                             <basicfieldeditor showheader="true" showsavecancel="false" showerrorsinline="true" model="OpenTasks" buttonposition="" uniqueid="sk-2AOQqy-1342" mode="edit" layout="above">
                                                <columns>
                                                   <column width="100%">
                                                      <sections>
                                                         <section title="Section A" collapsible="no" showheader="false">
                                                            <fields>
                                                               <field id="Description" valuehalign="" type="" cssclass="bigField"/>
                                                            </fields>
                                                         </section>
                                                      </sections>
                                                   </column>
                                                </columns>
                                                <conditions>
                                                   <condition type="contextrow" field="Id" mergefield="Id" operator="="/>
                                                </conditions>
                                             </basicfieldeditor>
                                          </components>
                                          <beforeload/>
                                       </drawer>
                                       <renderconditions logictype="and"/>
                                    </action>
                                 </rowactions>
                                 <massactions usefirstitemasdefault="true">
                                    <action type="massupdate"/>
                                    <action type="massdelete"/>
                                    <action type="multi" label="Mark Completed" icon="fa-check-square-o">
                                       <actions>
                                          <action type="updateRow" fieldmodel="OpenTasks" field="Status" enclosevalueinquotes="true" value="Completed"/>
                                          <action type="save">
                                             <models>
                                                <model>OpenTasks</model>
                                             </models>
                                          </action>
                                          <action type="requeryModels" model="pgs_CurrentUser" behavior="standard">
                                             <models>
                                                <model>TaskHistory</model>
                                                <model>OpenTasks</model>
                                             </models>
                                          </action>
                                       </actions>
                                    </action>
                                 </massactions>
                                 <views>
                                    <view type="standard"/>
                                 </views>
                                 <filters/>
                                 <actions defaultlabel="Global Actions" defaulticon="ui-silk-wand" usefirstitemasdefault="true"/>
                                 <searchfields/>
                              </skootable>
                              <template model="Opportunity" multiple="true" allowhtml="true" uniqueid="sk-2AMWHy-565">
                                 <contents>&lt;div class="nx-editor-header-title"&gt;Completed Tasks&lt;/div&gt;</contents>
                              </template>
                              <skootable showconditions="true" showsavecancel="false" searchbox="false" searchmethod="server" showexportbuttons="false" pagesize="10" createrecords="true" model="TaskHistory" mode="read" emptysearchbehavior="query" uniqueid="sk-2AMWHy-566">
                                 <fields>
                                    <field id="Subject" valuehalign="" type=""/>
                                    <field id="WhoId">
                                       <label>Related To</label>
                                    </field>
                                    <field id="Priority"/>
                                    <field id="Status"/>
                                    <field id="ActivityDate" allowordering="true">
                                       <label>Date</label>
                                    </field>
                                    <field id="OwnerId" allowordering="true">
                                       <label>Assigned To</label>
                                    </field>
                                 </fields>
                                 <rowactions>
                                    <action type="edit"/>
                                    <action type="delete"/>
                                    <action type="drawer" label="View Conversation Details" icon="fa-folder" openicon="fa-folder-o">
                                       <drawer title="Drawer Area" width="90%" closehandle="true">
                                          <components>
                                             <basicfieldeditor showheader="true" showsavecancel="false" model="TaskHistory" buttonposition="" mode="read" layout="above">
                                                <columns>
                                                   <column width="100%">
                                                      <sections>
                                                         <section title="Section A" collapsible="no" showheader="false">
                                                            <fields>
                                                               <field id="Description"/>
                                                            </fields>
                                                         </section>
                                                      </sections>
                                                   </column>
                                                </columns>
                                                <conditions>
                                                   <condition type="contextrow" field="Id" mergefield="Id"/>
                                                </conditions>
                                             </basicfieldeditor>
                                          </components>
                                       </drawer>
                                       <renderconditions logictype="and"/>
                                    </action>
                                 </rowactions>
                                 <massactions usefirstitemasdefault="true">
                                    <action type="massupdate"/>
                                    <action type="massdelete"/>
                                 </massactions>
                                 <views>
                                    <view type="standard"/>
                                 </views>
                                 <actions defaultlabel="Global Actions" defaulticon="ui-silk-wand" usefirstitemasdefault="true">
                                    <action type="popup" label="Log Call" icon="sk-icon-phone">
                                       <popup title="Log a Call" width="75%">
                                          <components>
                                             <includepanel type="skuid" uniqueid="sk-2AOstE-1439" pagename="LogaCall.Drawer" module="" querystring="?WhatId={{$Model.Opportunity.data.0.Id}}&amp;acct={{$Model.Opportunity.data.0.AccountId}}&amp;acct2={{$Model.Opportunity.data.0.Account.Name}}" lazyload="false"/>
                                          </components>
                                       </popup>
                                       <hotkeys/>
                                    </action>
                                    <action type="multi" label="Log Voice Mail" icon="fa-microphone">
                                       <actions>
                                          <action type="createRow" url="/00T/e?title=Call%3A%20&amp;what_id={{#$Model.Opportunity.data}}{{Id15}}{{/$Model.Opportunity.data}}&amp;tsk5=Call%3A%20&amp;tsk10=Call&amp;retURL=%2F{{$Param.id}}" window="self" model="TaskHistory" appendorprepend="prepend" defaultmodefornewitems="edit">
                                             <defaults>
                                                <default type="fieldvalue" field="Subject" enclosevalueinquotes="true" value="Left VM: "/>
                                                <default type="fieldvalue" field="WhatId" enclosevalueinquotes="true" value="{{$Model.Opportunity.data.0.Id}}"/>
                                                <default type="fieldvalue" field="Status" enclosevalueinquotes="true" value="Completed"/>
                                                <default type="fieldvalue" field="ActivityDate" enclosevalueinquotes="true" value="TODAY"/>
                                             </defaults>
                                          </action>
                                       </actions>
                                    </action>
                                 </actions>
                                 <filters/>
                                 <searchfields/>
                              </skootable>
                           </components>
                           <oninitialshowactions>
                              <action type="requeryModels" behavior="standard">
                                 <models>
                                    <model>TaskHistory</model>
                                    <model>OpenTasks</model>
                                 </models>
                              </action>
                           </oninitialshowactions>
                           <onshowactions/>
                        </tab>
                        <tab name="Events" icon="sk-icon-calendar">
                           <components>
                              <skoocal rememberdate="true" rememberview="true" rangemodel="Opportunity" uniqueid="sk-2AMWHy-567">
                                 <sources>
                                    <eventsource name="Relevant Events" model="RelevantEvents" namefield="Subject" groupfield="WhoId" startfield="StartDateTime" endfield="EndDateTime" createable="true" updateable="true" deleteable="true" eventclickhandler="autopopup">
                                       <eventtemplate>{{Subject}}
{{WhoId}}
{{IsAllDayEvent}}
{{Type}}</eventtemplate>
                                    </eventsource>
                                    <eventsource name="Opp Owner Events" model="OppOwnerCalendarEvents" color="yellow" namefield="Subject" startfield="StartDateTime" endfield="EndDateTime" groupfield="WhoId" createable="true" updateable="true" deleteable="true" eventclickhandler="autopopup">
                                       <eventtemplate>{{Subject}}</eventtemplate>
                                    </eventsource>
                                 </sources>
                                 <views>
                                    <eventview type="week"/>
                                    <eventview type="dayscheduling" groupingmodel="OpportunityRoles" pagesize="5" searchmethod="client">
                                       <groupingtemplate>{{Contact.Name}}</groupingtemplate>
                                    </eventview>
                                    <eventview type="month"/>
                                 </views>
                              </skoocal>
                           </components>
                        </tab>
                        <tab name="Stage History" loadlazypanels="true" icon="fa-history">
                           <components>
                              <skootable showconditions="true" showsavecancel="false" searchbox="true" searchmethod="server" showexportbuttons="false" pagesize="10" createrecords="false" model="StageHistory" mode="read" uniqueid="sk-2AMWHy-568">
                                 <fields>
                                    <field id="StageName" allowordering="true" readonly="true"/>
                                    <field id="Amount" readonly="true"/>
                                    <field id="Probability" readonly="true"/>
                                    <field id="ExpectedRevenue" readonly="true"/>
                                    <field id="CloseDate"/>
                                    <field type="COMBO" readonly="true">
                                       <label>Last Modified</label>
                                       <template model="StageHistory" multiple="true">{{CreatedById}}, {{CreatedDate}}</template>
                                    </field>
                                 </fields>
                                 <rowactions/>
                                 <massactions usefirstitemasdefault="true"/>
                                 <views>
                                    <view type="standard"/>
                                 </views>
                              </skootable>
                           </components>
                           <oninitialshowactions>
                              <action type="requeryModel" model="StageHistory" behavior="standard"/>
                           </oninitialshowactions>
                           <onshowactions/>
                           <renderconditions logictype="and"/>
                        </tab>
                     </tabs>
                  </tabset>
               </components>
            </tab>
            <tab name="Docs" icon="sk-icon-notes-and-attachments" uniqueid="docs">
               <components>
                  <tabset rememberlastusertab="true" defertabrendering="true" uniqueid="sk-2AMWHy-570" renderas="">
                     <tabs>
                        <tab name="Attachments" icon="sk-icon-attachments">
                           <components>
                              <wrapper uniqueid="sk-2EUgS8-1024">
                                 <components>
                                    <file storeas="record" displayas="filename" model="Opportunity" uniqueid="sk-2AMWHy-572">
                                       <renderconditions logictype="and"/>
                                    </file>
                                 </components>
                                 <styles>
                                    <styleitem type="background"/>
                                    <styleitem type="border" padding="top,">
                                       <styles>
                                          <styleitem property="padding-top" value="1em"/>
                                          <styleitem property="box-sizing" value="border-box"/>
                                       </styles>
                                    </styleitem>
                                    <styleitem type="size"/>
                                 </styles>
                              </wrapper>
                              <skootable showconditions="true" showsavecancel="false" searchbox="true" searchmethod="server" showexportbuttons="false" pagesize="10" createrecords="false" model="Attachments" mode="read" uniqueid="sk-2AMWHy-573">
                                 <fields>
                                    <field id="Name"/>
                                    <field type="COMBO" readonly="true">
                                       <label>Last Modified By</label>
                                       <template model="Attachments" multiple="true">{{LastModifiedById}}, {{LastModifiedDate}}</template>
                                    </field>
                                    <field id="CreatedById">
                                       <label>Created By</label>
                                    </field>
                                    <field id="Description"/>
                                    <field type="COMBO" valuehalign="" allowhtml="true">
                                       <label>Preview</label>
                                       <template>&lt;img src="/servlet/servlet.FileDownload?file={{{Id}}}" height=75px&gt;</template>
                                    </field>
                                 </fields>
                                 <rowactions>
                                    <action type="edit"/>
                                    <action type="delete"/>
                                    <action type="redirect" label="View File" url="/servlet/servlet.FileDownload?file={{Id}}" icon="sk-icon-popup" window="blank"/>
                                    <action type="popup" label="View record details" icon="sk-icon-magic">
                                       <popup width="80%" title="Viewing {{Model.label}}: {{Name}}">
                                          <components/>
                                       </popup>
                                    </action>
                                 </rowactions>
                                 <massactions usefirstitemasdefault="true">
                                    <action type="massupdate"/>
                                    <action type="massdelete"/>
                                 </massactions>
                                 <views>
                                    <view type="standard"/>
                                 </views>
                                 <actions defaultlabel="Global Actions" defaulticon="ui-silk-wand" usefirstitemasdefault="true"/>
                                 <searchfields/>
                              </skootable>
                           </components>
                           <oninitialshowactions>
                              <action type="requeryModel" model="Attachments" behavior="standard"/>
                           </oninitialshowactions>
                           <onshowactions/>
                           <renderconditions logictype="and"/>
                        </tab>
                        <tab name="Notes" icon="sk-icon-note">
                           <components>
                              <skootable showconditions="true" showsavecancel="false" searchbox="true" searchmethod="server" showexportbuttons="false" pagesize="10" createrecords="true" model="Notes" uniqueid="sk-2AMWHy-574" mode="read">
                                 <fields>
                                    <field id="Title"/>
                                    <field id="Body"/>
                                    <field type="COMBO" readonly="true">
                                       <label>Last Modified By</label>
                                       <template model="Notes" multiple="true">{{LastModifiedById}}, {{LastModifiedDate}}</template>
                                    </field>
                                    <field id="OwnerId">
                                       <label>Owner</label>
                                    </field>
                                 </fields>
                                 <rowactions>
                                    <action type="edit"/>
                                    <action type="delete"/>
                                 </rowactions>
                                 <massactions usefirstitemasdefault="true">
                                    <action type="massupdate"/>
                                    <action type="massdelete"/>
                                 </massactions>
                                 <views>
                                    <view type="standard"/>
                                 </views>
                              </skootable>
                           </components>
                           <oninitialshowactions>
                              <action type="requeryModel" model="Notes" behavior="standard"/>
                           </oninitialshowactions>
                           <onshowactions/>
                           <renderconditions logictype="and"/>
                        </tab>
                     </tabs>
                     <renderconditions logictype="and"/>
                  </tabset>
               </components>
               <renderconditions logictype="and"/>
            </tab>
         </tabs>
         <renderconditions logictype="and"/>
      </tabset>
   </components>
   <resources>
      <labels/>
      <javascript/>
      <css>
         <cssitem location="inline" name="CustomCSS" cachelocation="false">/* hide footer tables with hidetablefooter class */

.hidetablefooter .nx-list-footer {	
    display:none;
}

.hidetablefooter .nx-editor-header {
margin: 4px 0;

}</cssitem>
      </css>
   </resources>
   <styles>
      <styleitem type="background" bgtype="none"/>
   </styles>
</skuidpage>

